(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=require('./src/JsonRpc.js');

},{"./src/JsonRpc.js":11}],2:[function(require,module,exports){
"use strict";

},{}],3:[function(require,module,exports){
"use strict";module.exports=require('./src/JSONLess.js');

},{"./src/JSONLess.js":6}],4:[function(require,module,exports){
"use strict";module.exports=require('./src/utls.js');

},{"./src/utls.js":5}],5:[function(require,module,exports){
"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var __vcopy_handlers={};var utls=function(){function utls(){_classCallCheck(this,utls);throw new Error('Class "utls" cannot be instantiated');}_createClass(utls,null,[{key:'getType',value:function getType(value){var type=/\[object ([^\]]*)]/.exec(Object.prototype.toString.call(value))[1];switch(type){case 'Number':if(value%1!==0){type='Float';}else {type='Integer';}break;case 'Function':type=value.name.length?value.name:type;break;case 'Object':type=value.constructor.name.length?value.constructor.name:type;break;default:break;}return type;}},{key:'microtime',value:function microtime(){return new Date().getTime()/1000;}},{key:'ucFirst',value:function ucFirst(string){return (string||'').charAt(0).toUpperCase()+string.slice(1);}},{key:'lcFirst',value:function lcFirst(string){return (string||'').charAt(0).toLowerCase()+string.slice(1);}},{key:'camelCase',value:function camelCase(string){return (string||'').toLowerCase().replace(/(-|\s|_)./g,function(m){return m.toUpperCase().replace(/-|\s|_/,'');});}},{key:'pascalCase',value:function pascalCase(string){return this.ucFirst(this.camelCase(string));}},{key:'fileExists',value:function fileExists(path){if(!require('path').isAbsolute(path)){throw new Error("Path must be absolute!");}try{var fs=require('fs');fs.accessSync(fs.realpathSync(path),fs.F_OK);}catch(e){return false;}return true;}},{key:'mkdir',value:function mkdir(path,options){options=options||{};options.mode=options.mode||509;options.parents=options.parents||true;var xpath=require('path');var fs=require('fs');var parts=path.split(xpath.sep);if(options.parents){for(var i=1;i<parts.length;i++){path=parts.slice(0,i).join(xpath.sep)+xpath.sep;if(!utls.fileExists(path)){fs.mkdirSync(path,options.mode);}}}else {path=parts.splice(0,parts.length-1).join(xpath.sep)+xpath.sep;if(utls.fileExists(path)){}}return true;}},{key:'extend',value:function extend(destination,source){destination=destination||{};source=source||{};for(var property in source){if(source.hasOwnProperty(property)&&source[property]&&source[property].constructor&&source[property].constructor===Object){if(!(destination[property]&&destination[property].constructor&&destination[property].constructor===Object)){destination[property]={};}utls.extend(destination[property],source[property]);}else {destination[property]=source[property];}}return destination;}},{key:'promisesWaterfall',value:function promisesWaterfall(promises,initial){if("Promise"!==utls.getType(initial)){throw new Error("Initial value must be Promise");}return new Promise(function(resolve,reject){var final=promises.reduce(function(prevTask,current){return prevTask.then(current).catch(reject);},initial);final.then(resolve).catch(reject);});}},{key:'traverse',value:function traverse(value,match,callback,key,origin){if(match(value)){return callback(value,key,origin);}else if(utls.getType(value)=='Array'){var _ret=function(){var arr=[];value.map(function(val,key,origin){var res=utls.traverse(val,match,callback,key,origin);if(res!==undefined){arr.push(res);}});if(arr.length){return {v:arr};}}();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}else if(utls.getType(value)=='Object'){var obj={};Object.getOwnPropertyNames(value).forEach(function(key){var res=utls.traverse(value[key],match,callback,key,value);if(res!==undefined){obj[key]=res;}});if(Object.getOwnPropertyNames(obj).length){return obj;}}}},{key:'equals',value:function equals(first,second){function arrays(first,second){if(first===second){return true;}if(first.length!==second.length){return false;}var length=first.length;for(var i=0;i<length;i++){if(first[i] instanceof Array&&second[i] instanceof Array){if(!arrays(first[i],second[i])){return false;}}else if(first[i] instanceof Object&&second[i] instanceof Object){if(!objects(first[i],second[i])){return false;}}else {if(first[i]!==second[i]){return false;}}}return true;}function objects(first,second){if(first===second){return true;}var firstProps=Object.getOwnPropertyNames(first).sort();var firstPropsLength=firstProps.length;var secondProps=Object.getOwnPropertyNames(second).sort();if(firstPropsLength!==secondProps.length){return false;}if(!arrays(firstProps,secondProps)){return false;}for(var i=0;i<firstPropsLength;i++){var key=firstProps[i];if(first[key] instanceof Array&&second[key] instanceof Array){if(!arrays(first[key],second[key])){return false;}}else if(first[key] instanceof Object&&second[key] instanceof Object){if(!objects(first[key],second[key])){return false;}}else {if(first[key]!==second[key]){return false;}}}return true;}if(first instanceof Array&&second instanceof Array){return arrays(first,second);}else if(first instanceof Object&&second instanceof Object){return objects(first,second);}else {return false;}}},{key:'vcopy',value:function vcopy(value){var copy;if((typeof value==='undefined'?'undefined':_typeof(value))==='object'){var type=utls.getType(value);if(type==='Array'){copy=value.map(function(val){return utls.vcopy(val);});}else if(type==='Object'){copy={};Object.getOwnPropertyNames(value).forEach(function(key){copy[key]=utls.vcopy(value[key]);});}else if(_typeof(__vcopy_handlers[type])==='object'){return __vcopy_handlers[type].handler(__vcopy_handlers[type].cls,value);}else {copy=value;}}else {copy=value;}return copy;}},{key:'isCircular',value:function isCircular(value){var __ref=[];function check(value){if((typeof value==='undefined'?'undefined':_typeof(value))==='object'){if(__ref.indexOf(value)!==-1){return true;}__ref.push(value);for(var key in value){if(value.hasOwnProperty(key)&&check(value[key])){return true;}}__ref.pop();}return false;}return check(value);}}]);return utls;}();utls.vcopy.addHandler=function vcopy_addHandler(cls,handler){__vcopy_handlers[utls.getType(cls)]={cls:cls,handler:handler};};utls.vcopy.addHandler(Date,function(cls,value){return new cls(value.getTime());});module.exports=utls;

},{"fs":2,"path":7}],6:[function(require,module,exports){
"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var utls=require('utls');var __handlers={};var JSONLess=function(){function JSONLess(){_classCallCheck(this,JSONLess);}_createClass(JSONLess,null,[{key:'parse',value:function parse(text,reviver){var value=JSON.parse(text,reviver);if(['Array','Object'].indexOf(utls.getType(value))!==-1){value=utls.traverse(value,function(v){return ['Array','Object'].indexOf(utls.getType(v))!==-1;},_revive);}return value;}},{key:'stringify',value:function stringify(value,replacer,space){if(utls.isCircular(value)){throw new TypeError('Converting circular structure to JSONLess');}if(utls.getType(value)==='Array'||(typeof value==='undefined'?'undefined':_typeof(value))==='object'){value=utls.traverse(value,function(v){return ['Array','Object'].indexOf(utls.getType(v))===-1;},_replace);}return JSON.stringify(value,replacer,space);}},{key:'addHandler',value:function addHandler(cls,replacer,reviver){__handlers[utls.getType(cls)]={cls:cls,replacer:replacer,reviver:reviver};}}]);return JSONLess;}();function _replace(value,key,origin){var type=utls.getType(value);if(_typeof(__handlers[type])==='object'){value={$type:type,$value:__handlers[type].replacer(__handlers[type].cls,value)};}return value;}function _revive(value,key,origin){if(utls.getType(value)==='Array'){value.forEach(function(item,key){if(['Array','Object'].indexOf(utls.getType(item))!==-1){value[key]=utls.traverse(item,function(v){return ['Array','Object'].indexOf(utls.getType(v))!==-1;},_revive);}else {value[key]=item;}});}else {if(value['$type']!==undefined&&value['$value']!==undefined){if(_typeof(__handlers[value['$type']])==='object'){value=__handlers[value['$type']].reviver(__handlers[value['$type']].cls,value['$value']);}}else {Object.getOwnPropertyNames(value).forEach(function(key){if(['Array','Object'].indexOf(utls.getType(value[key]))!==-1){value[key]=utls.traverse(value[key],function(v){return ['Array','Object'].indexOf(utls.getType(v))!==-1;},_revive);}});}}return value;}JSONLess.addHandler(Date,function(cls,value){return value.toJSON();},function(cls,value){return new cls(value);});module.exports=JSONLess;

},{"utls":4}],7:[function(require,module,exports){
(function (process){
'use strict';function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==='.'){parts.splice(i,1);}else if(last==='..'){parts.splice(i,1);up++;}else if(up){parts.splice(i,1);up--;}}if(allowAboveRoot){for(;up--;up){parts.unshift('..');}}return parts;}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function splitPath(filename){return splitPathRe.exec(filename).slice(1);};exports.resolve=function(){var resolvedPath='',resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=='string'){throw new TypeError('Arguments to path.resolve must be strings');}else if(!path){continue;}resolvedPath=path+'/'+resolvedPath;resolvedAbsolute=path.charAt(0)==='/';}resolvedPath=normalizeArray(filter(resolvedPath.split('/'),function(p){return !!p;}),!resolvedAbsolute).join('/');return (resolvedAbsolute?'/':'')+resolvedPath||'.';};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==='/';path=normalizeArray(filter(path.split('/'),function(p){return !!p;}),!isAbsolute).join('/');if(!path&&!isAbsolute){path='.';}if(path&&trailingSlash){path+='/';}return (isAbsolute?'/':'')+path;};exports.isAbsolute=function(path){return path.charAt(0)==='/';};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=='string'){throw new TypeError('Arguments to path.join must be strings');}return p;}).join('/'));};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=='')break;}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=='')break;}if(start>end)return [];return arr.slice(start,end-start+1);}var fromParts=trim(from.split('/'));var toParts=trim(to.split('/'));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break;}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push('..');}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join('/');};exports.sep='/';exports.delimiter=':';exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return '.';}if(dir){dir=dir.substr(0,dir.length-1);}return root+dir;};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length);}return f;};exports.extname=function(path){return splitPath(path)[3];};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i]);}return res;}var substr='ab'.substr(-1)==='b'?function(str,start,len){return str.substr(start,len);}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len);};

}).call(this,require('_process'))

},{"_process":8}],8:[function(require,module,exports){
'use strict';var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else {queueIndex=-1;}if(queue.length){drainQueue();}}function drainQueue(){if(draining){return;}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}queueIndex=-1;len=queue.length;}currentQueue=null;draining=false;clearTimeout(timeout);}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0);}};function Item(fun,array){this.fun=fun;this.array=array;}Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return '/';};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};

},{}],9:[function(require,module,exports){
arguments[4][4][0].apply(exports,arguments)
},{"./src/utls.js":10,"dup":4}],10:[function(require,module,exports){
"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var utls=function(){function utls(){_classCallCheck(this,utls);}_createClass(utls,null,[{key:'getType',value:function getType(value){var type=/\[object ([^\]]*)]/.exec(Object.prototype.toString.call(value))[1];switch(type){case 'Number':if(value%1!==0){type='Float';}else {type='Integer';}break;case 'Function':type=value.name.length?value.name:type;break;case 'Object':type=value.constructor.name.length?value.constructor.name:type;break;default:break;}return type;}},{key:'microtime',value:function microtime(){return new Date().getTime()/1000;}},{key:'ucFirst',value:function ucFirst(string){return (string||'').charAt(0).toUpperCase()+string.slice(1);}},{key:'lcFirst',value:function lcFirst(string){return (string||'').charAt(0).toLowerCase()+string.slice(1);}},{key:'camelCase',value:function camelCase(string){return (string||'').toLowerCase().replace(/(-|\s|_)./g,function(m){return m.toUpperCase().replace(/-|\s|_/,'');});}},{key:'pascalCase',value:function pascalCase(string){return this.ucFirst(this.camelCase(string));}},{key:'fileExists',value:function fileExists(path){if(!require('path').isAbsolute(path)){throw new Error("Path must be absolute!");}try{var fs=require('fs');fs.accessSync(fs.realpathSync(path),fs.F_OK);}catch(e){return false;}return true;}},{key:'mkdir',value:function mkdir(path){var xpath=require('path');if(!xpath.isAbsolute(path)){throw new Error("Path must be absolute");}var fs=require('fs');var parts=path.split(xpath.sep);for(var i=1;i<parts.length;i++){path=parts.slice(0,i).join(xpath.sep)+"/";if(!utls.fileExists(path)){fs.mkdirSync(path);}}}},{key:'extend',value:function extend(destination,source){destination=destination||{};source=source||{};for(var property in source){if(source.hasOwnProperty(property)&&source[property]&&source[property].constructor&&source[property].constructor===Object){if(!(destination[property]&&destination[property].constructor&&destination[property].constructor===Object)){destination[property]={};}utls.extend(destination[property],source[property]);}else {destination[property]=source[property];}}return destination;}},{key:'promisesWaterfall',value:function promisesWaterfall(promises,initial){if("Promise"!==utls.getType(initial)){throw new Error("Initial value must be Promise");}return new Promise(function(resolve,reject){var final=promises.reduce(function(prevTask,current){return prevTask.then(current).catch(reject);},initial);final.then(resolve).catch(reject);});}},{key:'traverse',value:function traverse(value,match,callback,key,origin){if(match(value)){return callback(value,key,origin);}else if(utls.getType(value)=='Array'){var _ret=function(){var arr=[];value.map(function(val,key,origin){var res=utls.traverse(val,match,callback,key,origin);if(res!==undefined){arr.push(res);}});if(arr.length){return {v:arr};}}();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}else if(utls.getType(value)=='Object'){var obj={};Object.getOwnPropertyNames(value).forEach(function(key){var res=utls.traverse(value[key],match,callback,key,value);if(res!==undefined){obj[key]=res;}});if(Object.getOwnPropertyNames(obj).length){return obj;}}}},{key:'equals',value:function equals(first,second){function arrays(first,second){if(first===second){return true;}if(first.length!==second.length){return false;}var length=first.length;for(var i=0;i<length;i++){if(first[i] instanceof Array&&second[i] instanceof Array){if(!arrays(first[i],second[i])){return false;}}else if(first[i] instanceof Object&&second[i] instanceof Object){if(!objects(first[i],second[i])){return false;}}else {if(first[i]!==second[i]){return false;}}}return true;}function objects(first,second){if(first===second){return true;}var firstProps=Object.getOwnPropertyNames(first).sort();var firstPropsLength=firstProps.length;var secondProps=Object.getOwnPropertyNames(second).sort();if(firstPropsLength!==secondProps.length){return false;}if(!arrays(firstProps,secondProps)){return false;}for(var i=0;i<firstPropsLength;i++){var key=firstProps[i];if(first[key] instanceof Array&&second[key] instanceof Array){if(!arrays(first[key],second[key])){return false;}}else if(first[key] instanceof Object&&second[key] instanceof Object){if(!objects(first[key],second[key])){return false;}}else {if(first[key]!==second[key]){return false;}}}return true;}if(first instanceof Array&&second instanceof Array){return arrays(first,second);}else if(first instanceof Object&&second instanceof Object){return objects(first,second);}else {return false;}}}]);return utls;}();module.exports=utls;

},{"fs":2,"path":7}],11:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var utls=require('utls');var JSONLess=require('json-less');var __version='1.1.0';var __id=0;var __callbacks={};var __callbacksTimeout=60000;var __options={autoFireCallbacks:true};var JsonRpc=function(){function JsonRpc(message){_classCallCheck(this,JsonRpc);if(this.constructor===JsonRpc){throw new TypeError('Abstract class "JsonRpc" cannot be instantiated directly.');}if(message.callback!==undefined){var callback=message.callback;delete message.callback;}this.message=message;if(callback){this.setCallback(callback);}if(this.constructor===Response){if(__options.autoFireCallbacks){if(__callbacks[this.getId()]!==undefined){JsonRpc.fireCallback(this);}}}}_createClass(JsonRpc,[{key:'getVersion',value:function getVersion(){return this.message.version;}},{key:'setVersion',value:function setVersion(version){this.message.version=version;return this;}},{key:'getId',value:function getId(){return this.message.id;}},{key:'setId',value:function setId(id){this.message.id=parseInt(id,10);return this;}},{key:'getResource',value:function getResource(){return this.message.resource;}},{key:'setResource',value:function setResource(resource){this.message.resource=resource;return this;}},{key:'getMethod',value:function getMethod(){return this.message.method;}},{key:'setMethod',value:function setMethod(method){this.message.method=method;return this;}},{key:'getCallback',value:function getCallback(){return __callbacks[this.message.id]?__callbacks[this.message.id].cb:undefined;}},{key:'setCallback',value:function setCallback(callback,tls){tls=tls||__callbacksTimeout;var self=this;var timeout=setTimeout(function(){JsonRpc.removeCallback(self.message.id);},tls);__callbacks[this.message.id]={cb:callback,timeout:timeout};return this;}},{key:'getParams',value:function getParams(){return this.message.params;}},{key:'setParams',value:function setParams(params){this.message.params=params;return this;}},{key:'getResult',value:function getResult(){return this.message.result;}},{key:'setResult',value:function setResult(result){this.message.result=result;return this;}},{key:'getError',value:function getError(){return this.message.error;}},{key:'setError',value:function setError(error){if(!(error instanceof JsonRpcError)){error=new JsonRpcError(error);}this.message.error=error;return this;}},{key:'toJSON',value:function toJSON(){return this.message;}},{key:'toString',value:function toString(){return JSONLess.stringify(this.toJSON());}},{key:'isRequest',get:function get(){return this instanceof Request;}},{key:'isResponse',get:function get(){return this instanceof Response;}},{key:'isNotification',get:function get(){return this instanceof Notification;}}],[{key:'setOptions',value:function setOptions(options){__options=utls.extend(__options,options);}},{key:'getOptions',value:function getOptions(){return __options;}},{key:'getType',value:function getType(message){if(!(message instanceof Object)){throw new Error('Message parameter must be object');}switch(true){case JsonRpc.isValidRequest(message):return 'request';case JsonRpc.isValidResponse(message):return 'response';case JsonRpc.isValidNotification(message):return 'notification';default:break;}}},{key:'parse',value:function parse(message){if(utls.getType(message)!=='Object'){if(utls.getType(message)==='String'){try{message=JSONLess.parse(message);}catch(e){throw new Error(JsonRpcError.E_PARSE.message,JsonRpcError.E_PARSE.code);}}else {throw new Error('Message must be string or object type');}}switch(JsonRpc.getType(message)){case 'request':return new Request(message);case 'response':return new Response(message);case 'notification':return new Notification(message);default:throw new Error('Unknown message type');}}},{key:'isValidRequest',value:function isValidRequest(message){if(utls.getType(message)!=='Object'){return false;}if(message.error!==undefined||message.result!==undefined){return false;}return message.version===__version&&utls.getType(message.id)==='Integer'&&message.id>0&&utls.getType(message.resource)==='String'&&message.resource.length&&utls.getType(message.method)==='String'&&message.method.length&&utls.getType(message.params)==='Object';}},{key:'isValidResponse',value:function isValidResponse(message){if(utls.getType(message)!=='Object'){return false;}if(message.method!==undefined||message.resource!==undefined||message.params!==undefined){return false;}if(message.id!==undefined){if(utls.getType(message.id)!=='Integer'||message.id<=0){return false;}}return message.version===__version&&(message.result!==undefined||utls.getType(message.error)==='Object'&&utls.equals(Object.getOwnPropertyNames(message.error).sort(),['code','message'])&&utls.getType(message.error.code)==='Integer'&&utls.getType(message.error.message)==='String'||utls.getType(message.error)==='JsonRpcError'&&JsonRpcError.isValid(message.error));}},{key:'isValidNotification',value:function isValidNotification(message){if(utls.getType(message)!=='Object'){return false;}if(message.error!==undefined||message.result!==undefined||message.id!==undefined){return false;}return message.version===__version&&utls.getType(message.resource)==='String'&&message.resource.length&&utls.getType(message.method)==='String'&&message.method.length&&utls.getType(message.params)==='Object';}},{key:'hasValidSyntax',value:function hasValidSyntax(message){return JsonRpc.isValidRequest(message)||JsonRpc.isValidResponse(message)||JsonRpc.isValidNotification(message);}},{key:'getNextId',value:function getNextId(){return ++__id;}},{key:'fireCallback',value:function fireCallback(response){if(response instanceof Response){var callback=__callbacks[response.getId()];if(callback instanceof Object&&callback.cb instanceof Function){callback.cb(response);JsonRpc.removeCallback(response.getId());}}else {throw new Error('Response must be instance of JsonRpcResponse');}}},{key:'removeCallback',value:function removeCallback(id){var callback=__callbacks[id];if(callback instanceof Object){clearTimeout(callback.timeout);delete __callbacks[id];}}}]);return JsonRpc;}();module.exports=JsonRpc;var Request=require('./JsonRpcRequest.js');var Response=require('./JsonRpcResponse.js');var Notification=require('./JsonRpcNotification.js');var JsonRpcError=require('./JsonRpcError.js');module.exports.Request=Request;module.exports.Response=Response;module.exports.Notification=Notification;module.exports.JsonRpcError=JsonRpcError;module.exports.version=__version;module.exports.addHandler=JSONLess.addHandler;

},{"./JsonRpcError.js":12,"./JsonRpcNotification.js":13,"./JsonRpcRequest.js":14,"./JsonRpcResponse.js":15,"json-less":3,"utls":9}],12:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var utls=require('utls');var JsonRpcError=function(){function JsonRpcError(message,code){_classCallCheck(this,JsonRpcError);if(utls.getType(message)==='String'){this.setMessage(message);}if(utls.getType(code)==='Integer'){this.setCode(code);}}_createClass(JsonRpcError,[{key:'getCode',value:function getCode(){return this.code;}},{key:'getMessage',value:function getMessage(){return this.message;}},{key:'setCode',value:function setCode(code){if(utls.getType(code)!=='Integer'){throw new Error('Code must be number');}this.code=code;return this;}},{key:'setMessage',value:function setMessage(message){if(utls.getType(message)!=='String'){throw new Error('Message must be string');}this.message=message;return this;}}],[{key:'isValid',value:function isValid(error){return error instanceof JsonRpcError||utls.getType(error)==='Object'&&utls.equals(Object.getOwnPropertyNames(error).sort(),['code','message'])&&error.code instanceof Number&&error.message instanceof String;}}]);return JsonRpcError;}();JsonRpcError.E_PARSE={code:-1,message:'Parse error'};JsonRpcError.E_INVALID_REQUEST={code:-2,message:'Invalid Request'};JsonRpcError.E_NAMESPACE_NOT_FOUND={code:-3,message:'Namespace not found'};JsonRpcError.E_METHOD_NOT_FOUND={code:-4,message:'Method not found'};JsonRpcError.E_INVALID_PARAMS={code:-5,message:'Invalid params'};JsonRpcError.E_INTERNAL={code:-6,message:'Internal error'};module.exports=JsonRpcError;

},{"utls":9}],13:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var utls=require('utls');var JsonRpc=require('./JsonRpc.js');var JsonRpcNotification=function(_JsonRpc){_inherits(JsonRpcNotification,_JsonRpc);function JsonRpcNotification(message){_classCallCheck(this,JsonRpcNotification);if(message!==undefined){if(utls.getType(message)!=='Object'){throw new Error('Message must be object type');}message.version=message.version||JsonRpc.version;message.resource=message.resource||'__global__';if(!JsonRpc.isValidNotification(message)){throw new Error('Message is not valid json rpc notification');}}else {message={};message.version=JsonRpc.version;message.resource='__global__';}return _possibleConstructorReturn(this,Object.getPrototypeOf(JsonRpcNotification).call(this,message));}_createClass(JsonRpcNotification,[{key:'setVersion',value:function setVersion(version){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'getId',value:function getId(){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'setId',value:function setId(id){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'getError',value:function getError(){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'setError',value:function setError(error){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'getResult',value:function getResult(){throw new Error('Method not available in module "JsonRpcNotification"');}},{key:'setResult',value:function setResult(result){throw new Error('Method not available in module "JsonRpcNotification"');}}]);return JsonRpcNotification;}(JsonRpc);module.exports=JsonRpcNotification;

},{"./JsonRpc.js":11,"utls":9}],14:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var utls=require('utls');var JsonRpc=require('./JsonRpc.js');var JsonRpcRequest=function(_JsonRpc){_inherits(JsonRpcRequest,_JsonRpc);function JsonRpcRequest(message){_classCallCheck(this,JsonRpcRequest);if(message!==undefined){if(utls.getType(message)!=='Object'){throw new Error('Message must be object type');}message.version=message.version||JsonRpc.version;message.id=message.id||JsonRpc.getNextId();message.resource=message.resource||'__global__';message.params=message.params||{};if(!JsonRpc.isValidRequest(message)){throw new Error('Message is not valid json rpc request');}}else {message={};message.version=JsonRpc.version;message.id=JsonRpc.getNextId();message.resource='__global__';message.params=message.params||{};}return _possibleConstructorReturn(this,Object.getPrototypeOf(JsonRpcRequest).call(this,message));}_createClass(JsonRpcRequest,[{key:'setVersion',value:function setVersion(version){throw new Error('Method not available in module "JsonRpcRequest"');}},{key:'getError',value:function getError(){throw new Error('Method not available in module "JsonRpcRequest"');}},{key:'setError',value:function setError(error){throw new Error('Method not available in module "JsonRpcRequest"');}},{key:'getResult',value:function getResult(){throw new Error('Method not available in module "JsonRpcRequest"');}},{key:'setResult',value:function setResult(result){throw new Error('Method not available in module "JsonRpcRequest"');}}]);return JsonRpcRequest;}(JsonRpc);module.exports=JsonRpcRequest;

},{"./JsonRpc.js":11,"utls":9}],15:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var utls=require('utls');var JsonRpc=require('./JsonRpc.js');var JsonRpcResponse=function(_JsonRpc){_inherits(JsonRpcResponse,_JsonRpc);function JsonRpcResponse(message){_classCallCheck(this,JsonRpcResponse);if(message!==undefined){if(utls.getType(message)!=='Object'){throw new Error('Message must be object type');}message.version=message.version||JsonRpc.version;if(!JsonRpc.isValidResponse(message)){throw new Error('Message is not valid json rpc response');}}else {message={};message.version=JsonRpc.version;}return _possibleConstructorReturn(this,Object.getPrototypeOf(JsonRpcResponse).call(this,message));}_createClass(JsonRpcResponse,[{key:'setVersion',value:function setVersion(version){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'getResource',value:function getResource(){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'setResource',value:function setResource(resource){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'getMethod',value:function getMethod(){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'setMethod',value:function setMethod(method){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'getCallback',value:function getCallback(){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'setCallback',value:function setCallback(callback){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'getParams',value:function getParams(){throw new Error('Method not available in module "JsonRpcResponse"');}},{key:'setParams',value:function setParams(params){throw new Error('Method not available in module "JsonRpcResponse"');}}]);return JsonRpcResponse;}(JsonRpc);module.exports=JsonRpcResponse;

},{"./JsonRpc.js":11,"utls":9}]},{},[1])


//# sourceMappingURL=browser.js.map
